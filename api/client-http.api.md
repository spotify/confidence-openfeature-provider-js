## API Report File for "@spotify-confidence/client-http"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

// @public (undocumented)
export function abortableSleep(milliseconds: number, signal?: AbortSignal): Promise<void>;

// @public (undocumented)
export type AppliedFlag = {
    flag: string;
    applyTime: string;
};

// @public (undocumented)
export class ApplyManager {
    constructor(options: ApplyManagerOptions);
    // (undocumented)
    apply(resolveToken: string, flagName: string): void;
    // (undocumented)
    flush(): Promise<void>;
}

// @public (undocumented)
export interface ApplyManagerOptions {
    // (undocumented)
    client: ConfidenceClient;
    // (undocumented)
    maxBufferSize: number;
    // (undocumented)
    timeout: number;
}

// @public (undocumented)
export class ConfidenceClient {
    constructor(options: ConfidenceClientOptions);
    // (undocumented)
    apply(flags: AppliedFlag[], resolveToken: string): Promise<void>;
    // (undocumented)
    resolve(context: ResolveContext, options?: {
        apply?: boolean;
        flags: string[];
    }): Promise<Configuration>;
}

// @public (undocumented)
export type ConfidenceClientOptions = {
    fetchImplementation: typeof fetch;
    clientSecret: string;
    apply: boolean;
    region?: 'global' | 'eu' | 'us';
    baseUrl?: string;
    sdk: SDK;
    timeout: number;
};

// @public (undocumented)
export namespace Configuration {
    // (undocumented)
    export interface Flag<T = unknown> extends FlagValue<T> {
        // (undocumented)
        name: string;
        // (undocumented)
        reason: ResolveReason;
        // (undocumented)
        schema: FlagSchema;
        // (undocumented)
        value: T;
        // (undocumented)
        variant: string;
    }
    // (undocumented)
    export type FlagSchema = 'undefined' | 'number' | 'boolean' | 'string' | {
        [step: string]: FlagSchema;
    };
    // (undocumented)
    export interface FlagValue<T = unknown> {
        // (undocumented)
        schema: FlagSchema;
        // (undocumented)
        value: T;
    }
    // (undocumented)
    export namespace FlagValue {
        // (undocumented)
        export function matches<T>({ schema }: FlagValue<T>, value: any): value is T;
        // (undocumented)
        export function traverse<T, S extends string>(flag: FlagValue<T>, path: S): FlagValue<Traversed<T, S>>;
        // (undocumented)
        export type Traversed<T, S extends string> = S extends `${infer STEP}.${infer REST}` ? STEP extends keyof T ? Traversed<T[STEP], REST> : unknown : S extends keyof T ? T[S] : never;
    }
    // (undocumented)
    export enum ResolveReason {
        // (undocumented)
        Archived = "RESOLVE_REASON_FLAG_ARCHIVED",
        // (undocumented)
        Match = "RESOLVE_REASON_MATCH",
        // (undocumented)
        NoSegmentMatch = "RESOLVE_REASON_NO_SEGMENT_MATCH",
        // (undocumented)
        NoTreatmentMatch = "RESOLVE_REASON_NO_TREATMENT_MATCH",
        // (undocumented)
        Unspecified = "RESOLVE_REASON_UNSPECIFIED"
    }
}

// @public (undocumented)
export interface Configuration {
    // (undocumented)
    context: ResolveContext;
    // (undocumented)
    flags: Readonly<{
        [name: string]: Configuration.Flag;
    }>;
    // (undocumented)
    resolveToken: string;
}

// @public
export class FetchBuilder {
    abortPrevious(): this;
    // Warning: (ae-forgotten-export) The symbol "Fetch" needs to be exported by the entry point index.d.ts
    build(sink: SimpleFetch): Fetch;
    // Warning: (ae-forgotten-export) The symbol "FetchPrimitive" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    impl?: FetchPrimitive;
    limitPending(maxPending: number): this;
    modifyRequest(mod: (request: Request) => Promise<Request> | Request): this;
    rateLimit(tokenFillRate: number, { maxTokens, initialTokens }?: {
        maxTokens?: number | undefined;
        initialTokens?: number | undefined;
    }): this;
    rejectNotOk(): this;
    retry({ maxRetries, delay, maxDelay, backoff, jitter, }?: {
        maxRetries?: number | undefined;
        delay?: number | undefined;
        maxDelay?: number | undefined;
        backoff?: number | undefined;
        jitter?: number | undefined;
    }): this;
    // Warning: (ae-forgotten-export) The symbol "SimpleFetch" needs to be exported by the entry point index.d.ts
    route(match: (url: string) => boolean, fetch: SimpleFetch): this;
    timeout(duration: number): this;
}

// @public (undocumented)
export class RequestError extends Error {
}

// @public (undocumented)
export type ResolveContext = {
    targeting_key?: string;
};

// @public (undocumented)
export type ResolvedFlag<T = any> = {
    flag: string;
    variant: string;
    value?: T;
    flagSchema?: ConfidenceFlagSchema;
    reason: Configuration.ResolveReason;
};

// @public (undocumented)
export class TimeoutError extends RequestError {
    constructor();
}

// Warnings were encountered during analysis:
//
// src/client/ConfidenceClient.ts:36:3 - (ae-forgotten-export) The symbol "ConfidenceFlagSchema" needs to be exported by the entry point index.d.ts
// src/client/ConfidenceClient.ts:45:3 - (ae-forgotten-export) The symbol "SDK" needs to be exported by the entry point index.d.ts

// (No @packageDocumentation comment for this package)

```
